@page "/deletar-produtos"
@inject NavigationManager Navigation

<h3>Deletar Produtos</h3>

@if (produtos == null || !produtos.Any())
{
    <p>Nenhum produto cadastrado.</p>
}
else
{
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Nome</th>
                <th>Descrição</th>
                <th>Preço</th>
                <th>Qtd Estoque</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var produto in produtos)
            {
                <tr>
                    <td>@produto.Nome</td>
                    <td>@produto.Descricao</td>
                    <td>@produto.Preco.ToString("C")</td>
                    <td>@produto.QtdEstoque</td>
                    <td>
                        <button class="btn btn-danger btn-sm" @onclick="() => Deletar(produto.Id)">
                            Deletar
                        </button>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}

@code {
    // Modelo Produto
    public class Produto
    {
        public int Id { get; set; }
        public string Nome { get; set; } = string.Empty;
        public string Descricao { get; set; } = string.Empty;
        public decimal Preco { get; set; }
        public int QtdEstoque { get; set; }
    }

    // Lista de produtos em memória
    private List<Produto> produtos = new List<Produto>
    {
        new Produto { Id = 1, Nome = "Produto A", Descricao = "Descrição A", Preco = 10.50m, QtdEstoque = 5 },
        new Produto { Id = 2, Nome = "Produto B", Descricao = "Descrição B", Preco = 20.00m, QtdEstoque = 10 },
        new Produto { Id = 3, Nome = "Produto C", Descricao = "Descrição C", Preco = 15.75m, QtdEstoque = 8 },
    };

    // Método para deletar um produto
    private void Deletar(int id)
    {
        var produto = produtos.FirstOrDefault(p => p.Id == id);
        if (produto != null)
        {
            produtos.Remove(produto);
        }
    }
}
