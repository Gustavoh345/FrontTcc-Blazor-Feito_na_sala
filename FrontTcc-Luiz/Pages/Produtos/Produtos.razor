@page "/produtos"
@inject NavigationManager Navigation
@using FrontTcc_Luiz.ViewModels

@inject IJSRuntime JS

<h1 class="text-center mb-4">Produtos</h1>

<button class="btn-voltar" @onclick="Voltar">⬅ Voltar</button>

<table class="table table-striped">
    <thead>
        <tr>
            <th>Nome</th>
            <th>Categoria</th>
            <th>Descrição</th>
            <th>Preço</th>
            <th>Estoque</th>
        </tr>
    </thead>

    <tbody>
        @foreach (var produto in Produto)
        {
            <tr>
                <td>@produto.Nome</td>
                <td>@produto.Categoria</td>
                <td>@produto.Descricao</td>
                <td>R$ @produto.Preco</td>
                <td>@produto.Estoque</td>
                <td>
                    <button class="btn btn-warning btn-sm" @onclick="EditarProduto">
                        ✏ Editar
                    </button>

                    <!-- Botão remover com popup -->
                    <button class="btn-remover" @onclick="() => RemoverProduto(produto)">
                        🗑️ remover
                    </button>
                </td>
            </tr>
        }
    </tbody>
</table>

<button class="btn-cadastrar" @onclick="CadastrarProduto">
    ➕ Cadastrar Produto
</button>


<style>
    .btn-voltar {
        background-color: #808080;
        color: white;
        padding: 10px 15px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        float: left;
    }

    .btn-remover {
        background-color: #FF0000;
        color: white;
        border: none;
        padding: 8px 16px;
        font-size: 14px;
        border-radius: 8px;
        cursor: pointer;
        transition: 0.25s ease-in-out;
        box-shadow: 0px 2px 4px rgba(0,0,0,0.2);
    }

        .btn-remover:hover {
            background-color: #FF4D4D;
            transform: translateY(-2px);
            box-shadow: 0px 4px 8px rgba(0,0,0,0.25);
        }
</style>





<script>
    function mostrarPopup(msg) {
        alert(msg);
    }
</script>







@code {

    void CadastrarProduto()
    {
        Navigation.NavigateTo("/cadastrar-produto");
    }

    void EditarProduto()
    {
        Navigation.NavigateTo($"/editar-produto)");
    }

    void Voltar()
    {
        Navigation.NavigateTo("/");
    }

    async Task RemoverProduto(ProdutoModel p)
    {
        Produto.Remove(p);

        // Chama JS para mostrar o pop-up
        await JS.InvokeVoidAsync("mostrarPopup", "produto removido da lista");

        StateHasChanged();
    }

    public class ProdutoModel
    {
        public string Nome { get; set; }
        public string Categoria { get; set; }
        public string Descricao { get; set; }
        public decimal Preco { get; set; }
        public int Estoque { get; set; }
    }

    List<ProdutoModel> Produto = new List<ProdutoModel>();

    protected override void OnInitialized()
    {
        Produto = new List<ProdutoModel>()
        {
            new ProdutoModel { Nome = "Notebook Dell Inspiron", Categoria = "Eletrônicos", Descricao = "Notebook com 8GB RAM e SSD 256GB", Preco = 3500.90m, Estoque = 10 },
            new ProdutoModel { Nome = "Camiseta Nike DryFit", Categoria = "Roupas", Descricao = "Camiseta esportiva respirável", Preco = 89.99m, Estoque = 50 },
            new ProdutoModel { Nome = "Relógio Casio", Categoria = "Acessórios", Descricao = "Relógio resistente à água", Preco = 199.90m, Estoque = 25 },
            new ProdutoModel { Nome = "Cadeira Gamer ThunderX3", Categoria = "Móveis", Descricao = "Cadeira confortável com ajuste de altura", Preco = 999.00m, Estoque = 5 }
        };
    }
}


